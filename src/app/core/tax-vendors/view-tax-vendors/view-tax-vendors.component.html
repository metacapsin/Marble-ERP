<p-toast></p-toast>
<div class="page-wrapper">
  <div class="content">
    <div class="page-header">
      <div class="row">
        <div class="col-sm-12">
          <ul class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="routes.adminDashboard">Dashboard </a>
            </li>
            <li class="breadcrumb-item">
              <i class="feather icon-chevron-right"></i>
            </li>
            <li class="breadcrumb-item active">
              <a [routerLink]="routes.taxVendors">Tax Vendor List</a>
            </li>
            <li class="breadcrumb-item">
              <i class="feather icon-chevron-right"></i>
            </li>
            <li class="breadcrumb-item active">View Tax Vendor</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="page-header invoices-page-header">
      <div class="row align-items-center">
        <div class="col">
          <ul class="breadcrumb invoices-breadcrumb d-flex justify-content-between">
            <li class="breadcrumb-item invoices-breadcrumb-item">
              <a [routerLink]="routes.taxVendors">
                <i class="fa fa-chevron-left"></i> Back to Tax Vendor List
              </a>
            </li>
            <li>
              Created On: {{ taxVendorsData?.createdOn | date : "dd-MMM-yyyy" }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <div class="card card-table show-entire">
          <div class="page-table-header mb-2 m-3">
            <div class="row practice-card">
              <div class="col-xl-6 col-lg-6 col-sm-12">
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.companyName">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Company Name
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      {{ taxVendorsData?.companyName }}
                    </p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.taxNo">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    GSTIN
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      {{ taxVendorsData?.taxNo }}
                    </p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.email">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Email
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">{{ taxVendorsData?.email }}</p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.phoneNumber">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Phone Number
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      {{ taxVendorsData?.phoneNumber }}
                    </p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.postalCode">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Postal Code
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      {{ taxVendorsData?.postalCode }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-xl-6 col-lg-6 col-sm-12">
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.country">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Country
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      {{ taxVendorsData?.country.name }}
                    </p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.state">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    State
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">{{ taxVendorsData?.state }}</p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.city">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    City
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">{{ taxVendorsData?.city }}</p>
                  </div>
                </div>
                <div class="form-group row mb-2" *ngIf="taxVendorsData?.addressLine1">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Address
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      {{ taxVendorsData?.addressLine1 }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card">
      <p-tabView>
        <p-tabPanel header="Sales">
          <div class="page-table-header mb-2">
            <div class="row align-items-center">
              <div class="col">
                <div class="doctor-table-blk">
                  <h3>Sales List</h3>
                  <!-- <div class="doctor-search-blk">
                    <div class="add-group textbtn">
                      <a class="btn btn-primary add-pluss ms-2" (click)="openSalesPaymentDialog()">

                        <img src="assets/img/icons/plus.svg" alt=""> Add Payment</a>
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>

          <p-table selectionMode="multiple" [(selection)]="selectedSales" [value]="salesDataShowById"
            styleClass="p-datatable-striped" [tableStyle]="{ 'min-width': '60rem' }"
            [paginator]="salesDataShowById?.length >= 5" [rows]="10" [rowsPerPageOptions]="[5, 10, 20]">
            <ng-template pTemplate="header">
              <tr class="text-center">
                <!-- <th style="width: 4rem" *ngIf="salesDataShowById?.length > 0"><p-tableHeaderCheckbox /></th> -->
                <th pSortableColumn="taxVendor.salesInvoice">
                  Invoice Number
                  <p-sortIcon field="taxVendor.salesInvoice"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.salesInvoice"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.salesDate">
                  Sales Date
                  <p-sortIcon field="taxVendor.salesDate"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.salesDate"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.vendorTaxApplied">
                  Applied Tax (%)
                  <p-sortIcon field="taxVendor.vendorTaxApplied"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.vendorTaxApplied"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="paymentStatus">
                  Payment Status <p-sortIcon field="paymentStatus"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="paymentStatus"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.paidAmount">
                  Paid Amount
                  <p-sortIcon field="taxVendor.paidAmount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.paidAmount"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.dueAmount">
                  Due Amount
                  <p-sortIcon field="taxVendor.dueAmount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.dueAmount"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.salesTotalAmount">
                  Total Amount
                  <p-sortIcon field="taxVendor.salesTotalAmount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.salesTotalAmount"
                    display="menu"></p-columnFilter>
                </th>
                <th>Action</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-sales>
              <tr>
                <!-- <td *ngIf="sales.taxVendor.paymentStatus == 'Unpaid' ">
                  <p-tableCheckbox [value]="sales" />
                </td> -->
                <!-- <td *ngIf="sales.taxVendor.paymentStatus == 'Paid' "></td> -->
                <td>{{ sales.taxVendor.salesInvoice }}</td>
                <td>{{ sales.taxVendor.salesDate | date : "dd-MMM-yyyy" }}</td>
                <td>{{ sales.taxVendor.vendorTaxApplied }}</td>
                <td *ngIf="sales.taxVendor.paymentStatus == 'Paid'">
                  <p-tag severity="success" value="Paid"></p-tag>
                </td>
                <td *ngIf="sales.taxVendor.paymentStatus == 'Unpaid'">
                  <p-tag severity="danger" value="Unpaid"></p-tag>
                </td>
                <td *ngIf="sales.taxVendor.paymentStatus == 'Partial Paid'">
                  <p-tag severity="danger" value="Partial Paid"></p-tag>
                </td>
                <td>₹ {{ sales.taxVendor.paidAmount | indianCurrency }}</td>
                <td>₹ {{ sales.taxVendor.dueAmount | indianCurrency }}</td>
                <td>
                  ₹ {{ sales.taxVendor.taxVendorAmount | indianCurrency }}
                </td>
                <td appShowHide [roles]="['admin', 'super-admin']">
                  <div class="action-buttons">
                    <p-button *ngIf="
                        sales.taxVendor.paymentStatus == 'Unpaid' ||
                        sales.taxVendor.paymentStatus == 'Partial Paid'
                      " [text]="true" icon="fa-solid fa-wallet" (click)="openSalesPaymentDialog(sales)"
                      pTooltip="Payment" tooltipPosition="bottom" tooltipStyleClass="tooltip"></p-button>
                    <p-button *ngIf="sales.taxVendor.paymentStatus === 'Paid'" [text]="true" icon="fa-solid fa-ban"
                      pTooltip="Payment cannot be made" tooltipPosition="bottom" tooltipStyleClass="tooltip"></p-button>
                  </div>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="8" class="text-center">No sales records found.</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="footer">
              <tr totalValueDirective [data]="salesDataShowById" [name]="salesDataShowBy">
                <!-- <td colspan="4"></td>
                <td>Total Amount</td> -->
                <!-- <td>₹ {{ getTotalPaidAmount() | indianCurrency }}</td>
                <td class="text-danger-dark">
                  ₹ {{ getTotalDueAmount() | indianCurrency }}
                </td> -->
                <!-- <td>₹ {{ getTotalSalesAmount() | indianCurrency }}</td> -->
                <!-- <td totalValueDirective [data]="salesReportsData"></td> -->
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>

        <p-tabPanel header="Sales Payments">
          <div class="page-table-header mb-2">
            <div class="row align-items-center">
              <div class="col">
                <div class="doctor-table-blk">
                  <h3>Payments List</h3>
                </div>
              </div>
            </div>
          </div>

          <p-table selectionMode="multiple" [value]="paymentListDataByTaxVendorsId" styleClass="p-datatable-striped"
            [tableStyle]="{ 'min-width': '60rem' }" [paginator]="paymentListDataByTaxVendorsId?.length >= 5" [rows]="10"
            [rowsPerPageOptions]="[5, 10, 20]">
            <ng-template pTemplate="header">
              <tr>
                <th pSortableColumn="salesInvoiceNumber">
                  Invoice Number
                  <p-sortIcon field="salesInvoiceNumber"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="salesInvoiceNumber"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="transactionNo">
                  Transaction Number
                  <p-sortIcon field="transactionNo"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="transactionNo"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="paymentDate">
                  Payment Date <p-sortIcon field="paymentDate"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="paymentDate"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="paymentMode">
                  Payment Mode <p-sortIcon field="paymentMode"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="paymentMode"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="amount">
                  Amount <p-sortIcon field="amount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="amount"
                    display="menu"></p-columnFilter>
                </th>
                <th width="15%">Action</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-payment>
              <tr>
                <td class="bold">{{ payment.salesInvoiceNumber }}</td>
                <td class="bold">{{ payment.transactionNo }}</td>
                <td class="bold">
                  {{ payment.paymentDate | date : "dd-MMM-yyyy" }}
                </td>
                <td>{{ payment.paymentMode }}</td>
                <td>₹ {{ payment.amount | indianCurrency }}</td>
                <td class="action-buttions">
                  <p-button [text]="true" icon="fa-solid fa-trash" (click)="deleteTaxVendorSalesPayment(payment._id)"
                    pTooltip="Delete" tooltipPosition="bottom" tooltipStyleClass="tooltip"></p-button>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="6" class="text-center">
                  No Payments are made yet.
                </td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>
        <p-tabPanel header="Purchase">
          <div class="page-table-header mb-2">
            <div class="row align-items-center">
              <div class="col">
                <div class="doctor-table-blk">
                  <h3>Purchase List</h3>
                  <!-- <div class="doctor-search-blk">
                    <div class="add-group textbtn">
                      <a class="btn btn-primary add-pluss ms-2" (click)="openPurchasePaymentDialog()">

                        <img src="assets/img/icons/plus.svg" alt=""> Add Payment</a>
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>

          <p-table selectionMode="multiple" [(selection)]="selectedPurchase" [value]="purchaseDataShowById"
            styleClass="p-datatable-striped" [tableStyle]="{ 'min-width': '60rem' }"
            [paginator]="purchaseDataShowById?.length >= 5" [rows]="10" [rowsPerPageOptions]="[5, 10, 20]">
            <ng-template pTemplate="header">
              <tr class="text-center">
                <!-- <th style="width: 4rem" *ngIf="purchaseDataShowById?.length > 0"><p-tableHeaderCheckbox /></th> -->
                <th pSortableColumn="taxVendor.purchaseInvoice">
                  Invoice Number
                  <p-sortIcon field="taxVendor.purchaseInvoice"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.purchaseInvoice"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.purchaseDate">
                  Purchase Date
                  <p-sortIcon field="taxVendor.purchaseDate"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.purchaseDate"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.vendorTaxApplied">
                  Applied Tax (%)
                  <p-sortIcon field="taxVendor.vendorTaxApplied"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.vendorTaxApplied"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="paymentStatus">
                  Payment Status <p-sortIcon field="paymentStatus"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="paymentStatus"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.paidAmount">
                  Paid Amount
                  <p-sortIcon field="taxVendor.paidAmount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.paidAmount"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.dueAmount">
                  Due Amount
                  <p-sortIcon field="taxVendor.dueAmount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.dueAmount"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="taxVendor.taxVendorAmount">
                  Total Amount
                  <p-sortIcon field="taxVendor.taxVendorAmount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="taxVendor.taxVendorAmount"
                    display="menu"></p-columnFilter>
                </th>
                <th>Action</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-purchase>
              <tr>
                <!-- <td *ngIf="purchase.taxVendor.paymentStatus == 'Unpaid' || purchase.taxVendor.paymentStatus == 'Partial Paid'">
                  <p-tableCheckbox [value]="purchase" />
                </td> -->
                <!-- <td *ngIf="purchase.taxVendor.paymentStatus == 'Paid' "></td> -->
                <td>{{ purchase.taxVendor.purchaseInvoice }}</td>
                <td>
                  {{ purchase.taxVendor.purchaseDate | date : "dd-MMM-yyyy" }}
                </td>
                <td>{{ purchase.taxVendor.vendorTaxApplied }}</td>
                <td *ngIf="purchase.taxVendor.paymentStatus == 'Paid'">
                  <p-tag severity="success" value="Paid"></p-tag>
                </td>
                <td *ngIf="purchase.taxVendor.paymentStatus == 'Partial Paid'">
                  <p-tag severity="warning" value="Partial Paid"></p-tag>
                </td>
                <td *ngIf="purchase.taxVendor.paymentStatus == 'Unpaid'">
                  <p-tag severity="danger" value="Unpaid"></p-tag>
                </td>
                <td>₹ {{ purchase.taxVendor.paidAmount | indianCurrency }}</td>
                <td>₹ {{ purchase.taxVendor.dueAmount | indianCurrency }}</td>
                <td>
                  ₹ {{ purchase.taxVendor.taxVendorAmount | indianCurrency }}
                </td>
                <td appShowHide [roles]="['admin', 'super-admin']">
                  <div class="action-buttons">
                    <p-button *ngIf="
                        purchase.taxVendor.paymentStatus == 'Unpaid' ||
                        purchase.taxVendor.paymentStatus == 'Partial Paid'
                      " [text]="true" icon="fa-solid fa-wallet" (click)="openPurchasePaymentDialog(purchase)"
                      pTooltip="Payment" tooltipPosition="bottom" tooltipStyleClass="tooltip"></p-button>
                    <p-button *ngIf="purchase.taxVendor.paymentStatus === 'Paid'" [text]="true" icon="fa-solid fa-ban"
                      pTooltip="Payment cannot be made" tooltipPosition="bottom" tooltipStyleClass="tooltip"></p-button>
                  </div>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="8" class="text-center">
                  No Purchase records found.
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="footer">
              <tr totalValueDirective [data]="purchaseDataShowById" [name]="purchaseDataShowBy">
                <!-- <td colspan="4"></td>
                <td>Total Amount</td> -->
                <!-- <td>₹ {{ getTotalPaidAmount() | indianCurrency }}</td>
                <td class="text-danger-dark">
                  ₹ {{ getTotalDueAmount() | indianCurrency }}
                </td> -->
                <!-- <td>₹ {{ getTotalSalesAmount() | indianCurrency }}</td> -->
                <!-- <td totalValueDirective [data]="salesReportsData"></td> -->
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>

        <p-tabPanel header="Purchase Payments">
          <div class="page-table-header mb-2">
            <div class="row align-items-center">
              <div class="col">
                <div class="doctor-table-blk">
                  <h3>Payments List</h3>
                </div>
              </div>
            </div>
          </div>

          <p-table selectionMode="multiple" [value]="purchasePaymentListDataByTaxVendorsId"
            styleClass="p-datatable-striped" [tableStyle]="{ 'min-width': '60rem' }"
            [paginator]="purchasePaymentListDataByTaxVendorsId?.length >= 5" [rows]="10"
            [rowsPerPageOptions]="[5, 10, 20]">
            <ng-template pTemplate="header">
              <tr>
                <th pSortableColumn="purchaseInvoiceNumber">
                  Invoice Number
                  <p-sortIcon field="purchaseInvoiceNumber"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="purchaseInvoiceNumber"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="transactionNo">
                  Transaction Number
                  <p-sortIcon field="transactionNo"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="transactionNo"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="paymentDate">
                  Payment Date <p-sortIcon field="paymentDate"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="paymentDate"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="paymentMode">
                  Payment Mode <p-sortIcon field="paymentMode"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="paymentMode"
                    display="menu"></p-columnFilter>
                </th>
                <th pSortableColumn="amount">
                  Amount <p-sortIcon field="amount"></p-sortIcon>
                  <p-columnFilter matchMode="contains" hideOnClear="true" type="text" field="amount"
                    display="menu"></p-columnFilter>
                </th>
                <th width="15%">Action</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-payment>
              <tr>
                <td class="bold">{{ payment.purchaseInvoiceNumber }}</td>
                <td class="bold">{{ payment.transactionNo }}</td>
                <td class="bold">
                  {{ payment.paymentDate | date : "dd-MMM-yyyy" }}
                </td>
                <td>{{ payment.paymentMode }}</td>
                <td>₹ {{ payment.amount | indianCurrency }}</td>
                <td class="action-buttions">
                  <p-button [text]="true" icon="fa-solid fa-trash" (click)="deleteTaxVendorPurchasePayment(payment._id)"
                    pTooltip="Delete" tooltipPosition="bottom" tooltipStyleClass="tooltip"></p-button>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="6" class="text-center">
                  No Payments are made yet.
                </td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>
      </p-tabView>
    </div>
  </div>
</div>

<app-confirm-dialog [showDialog]="showDialog" (callbackModal)="callBackModal()" (close)="close()"
  [data]="modalData"></app-confirm-dialog>

<p-dialog [focusOnShow]="false" header="Add Payment" [(visible)]="displayPaymentDialog" modal="true" [closable]="true"
  [style]="{ width: '80vw' }">
  <form [formGroup]="addTaxVendorsPaymentForm" (ngSubmit)="addTaxVendorsPaymentFormSubmit()">
    <div class="row">
      <div class="col-sm-12">
        <div class="card card-table show-entire">
          <div class="page-table-header mb-2 m-3">
            <div class="row practice-card">
              <div class="col-xl-6 col-lg-6 col-sm-12" *ngIf="totalSelectedSalesTotalAmount">
                <div class="form-group row mb-2">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Total Amount :
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      ₹ {{ totalSelectedSalesTotalAmount }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-xl-6 col-lg-6 col-sm-12" *ngIf="totalSelectedSalesDueAmount">
                <div class="form-group row mb-2">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Due Amount :
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      ₹ {{ totalSelectedSalesDueAmount | indianCurrency }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-xl-6 col-lg-6 col-sm-12" *ngIf="totalSelectedPurchaseTotalAmount">
                <div class="form-group row mb-2">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Total Amount :
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      ₹ {{ totalSelectedPurchaseTotalAmount }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-xl-6 col-lg-6 col-sm-12" *ngIf="totalSelectedPurchaseDueAmount">
                <div class="form-group row mb-2">
                  <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                    Due Amount :
                  </h5>
                  <div class="col-lg-8 col-md-8 col-xl-8">
                    <p class="col-form-label">
                      ₹ {{ totalSelectedPurchaseDueAmount | indianCurrency }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md-6">
        <div class="form-group local-forms">
          <label for="name">Payment Date <span class="login-danger">*</span></label>
          <p-calendar [maxDate]="maxDate" dataType="string" appendTo="body" dateFormat="mm/dd/yy"
            formControlName="paymentDate" placeholder="mm/dd/yyyy" [styleClass]="'col-12'"></p-calendar>
          <div *ngIf="
              addTaxVendorsPaymentForm
                .get('paymentDate')
                ?.hasError('required') &&
              addTaxVendorsPaymentForm.get('paymentDate')?.touched
            ">
            <span class="login-danger">Field is required. </span>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-6">
        <div class="form-group local-forms">
          <label for="paymentMode">Payment Mode <span class="login-danger">*</span></label>
          <p-dropdown [style]="{ width: '100%' }" placeholder="Payment Mode" [options]="paymentModeList"
            formControlName="paymentMode" optionLabel="paymentMode" optionValue="paymentMode" display="chip"
            [filter]="true" filterBy="paymentMode" [showClear]="true"></p-dropdown>
          <div *ngIf="
              addTaxVendorsPaymentForm
                .get('paymentMode')
                ?.hasError('required') &&
              addTaxVendorsPaymentForm.get('paymentMode')?.touched
            ">
            <span class="login-danger">Field is required. </span>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6">
        <div class="form-group local-forms">
          <label for="payableAmount">Payable Amount <span class="login-danger">*</span></label>
          <input class="form-control bor" type="number" formControlName="payableAmount" />
        </div>
      </div>

      <div class="col-12 col-md-6">
        <div class="form-group local-forms">
          <label for="amount">Notes </label>
          <textarea class="form-control" type="text" placeholder="" formControlName="note"></textarea>
          <div *ngIf="
              addTaxVendorsPaymentForm.get('note')?.hasError('pattern') &&
              addTaxVendorsPaymentForm.get('note')?.touched
            ">
            <span class="login-danger">Input must be between 2 to 100 characters.</span>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="invoice-add-table">
      <div class="table-responsive">
        <table class="table table-striped table-nowrap mb-0 no-footer add-table-items">
          <thead>
            <tr>
              <th>Invoice Number</th>
              <th>Date</th>
              <th>Invoice Amount</th>
              <th>Amount</th>
            </tr>
          </thead>
          <tbody formArrayName="sales">
            <tr *ngFor="let sale of sales.controls; let i = index" [formGroupName]="i">
              <td>
                <span class="bold">{{ sale.get('salesInvoiceNumber').value }}</span>
              </td>
              <td>
                <span class="bold">{{ salesDataShowById[i]?.taxVendor.salesDate | date: 'dd-MMM-yyyy' }}</span>
              </td>
              <td>
                <label>{{ '₹' + ' ' + sale.get('amount').value }}</label>
              </td>
              <td>
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">₹</span>
                  </div>
                  <input type="number" formControlName="amount" class="form-control" />
                </div>
                <span style="color: #97704f; font-size: 12px">Due Amount : {{ '₹' + ' ' + selectedSales[i]?.taxVendor.dueAmount }}</span>
                <div *ngIf="addTaxVendorsPaymentForm.get('sales').get(i + '.amount').hasError('required') &&
                              addTaxVendorsPaymentForm.get('sales').get(i + '.amount').touched">
                  <span class="login-danger">Field is required.</span>
                </div>
                <div *ngIf="addTaxVendorsPaymentForm.get('sales').get(i + '.amount').hasError('min') &&
                              addTaxVendorsPaymentForm.get('sales').get(i + '.amount').touched">
                  <span class="login-danger">Input must be equal to Due Amount.</span>
                </div>
                <div *ngIf="addTaxVendorsPaymentForm.get('sales').get(i + '.amount').hasError('max') &&
                              addTaxVendorsPaymentForm.get('sales').get(i + '.amount').touched">
                  <span class="login-danger">Input should not be more than {{ selectedSales[i]?.taxVendor.dueAmount }}.</span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>  -->

    <div class="form-group d-flex flex-wrap justify-content-end gap-2">
      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary m-r-10"
        [disabled]="!addTaxVendorsPaymentForm.valid">
        Submit
      </button>
      <button class="btn btn-secondary" (click)="close()">Cancel</button>
    </div>
  </form>
</p-dialog>