<p-toast></p-toast>
<div class="card p-3">
    <form [formGroup]="slabAddForm" (ngSubmit)="slabAddFormSubmit()">
        <div class="row">
            <div class="col-sm-12">
                <div *ngIf="tab == 'product'" class="row">
                    <div class="col-md-6 col-sm-12">
                        <h3>Add Slab Details</h3>
                    </div>
                    <div class="col-md-6 col-sm-12 text-end">
                        <button [disabled]="addSlabdisableBtn" type="button"
                            class="border-0 btn btn-primary btn-gradient-primary m-r-10" (click)="addSlabDialog()">
                            Add Slab
                        </button>
                    </div>
                </div>
                <div class="row mt-3">
                    <!-- <div class="col-12 col-md-6">
                        <div class="form-group local-forms">
                            <label for="vehicleNo">Vehicle Number</label>
                            <input class="form-control" type="text" placeholder="Enter Vehicle Number"
                                formControlName="vehicleNo" />
                            <div *ngIf="setValidations('vehicleNo')">
                                <span class="login-danger">Invalid vehicle number format. Please correct it.</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group local-forms">
                            <label for="warehouse">Warehouse<span class="login-danger">*</span></label>
                            <p-dropdown [options]="wareHousedata" appendTo="body" optionLabel="name" optionValue="_id"
                                placeholder="Select Warehouse" formControlName="warehouse" [style]="{ width: '100%' }"
                                [filter]="true" filterBy="name" [showClear]="true">
                            </p-dropdown>
                            <div *ngIf="setValidations('warehouse')">
                                <span class="login-danger">Field is required.</span>
                            </div>
                        </div>
                    </div> -->


                    <!-- <div class="col-12">
                        <button type="button" class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3"
                            (click)="addSlabDialog()" [disabled]="!slabAddForm.get('warehouse')?.value">
                            Add Slab
                        </button>
                    </div> -->
                    <!-- <div class="col-12 text-end">
                        <button type="button" class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3"
                            (click)="addSlabDialog()">
                            Add Slab
                        </button>
                    </div> -->

                </div>

            </div>
        </div>

        <form [formGroup]="expensesForm">
            <p-accordion *ngIf="tab == 'purchase'" [activeIndex]="0">
                <p-accordionTab>
                    <ng-template pTemplate="header">
                        <div class="d-flex justify-content-between align-items-center w-100">
                            <span class="font-bold">Expenses</span>
                            <button pButton type="button" icon="fa fa-plus" class="p-button-text p-0"
                                (click)="addExpense($event)"></button>
                        </div>
                    </ng-template>

                    <div class="row">
                        <div class="expenses-content" *ngIf="expensesExpanded">
                            <table class="expenses-table w-100" formArrayName="expenses">
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Payment</th>
                                        <th>Paid by:</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let expense of expenses.controls; let i = index"
                                        [formGroupName]="i">

                                        <tr>
                                            <td>
                                                <p-dropdown [options]="expenseTypeOptions" formControlName="type"
                                                    placeholder="Select Type"
                                                    (onChange)="calculateTotalAmount(); getValue(i, $event.value)"
                                                    optionLabel="name" optionValue="value" styleClass="w-100"
                                                    appendTo="body">
                                                </p-dropdown>
                                            </td>
                                            <td>
                                                <div class="input-with-icon">
                                                    <input type="text" pInputText formControlName="payment"
                                                        (change)="calculateTotalAmount()" class="form-control">
                                                    <span class="input-icon">₹</span>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center gap-3">
                                                    <p-radioButton [name]="'paidBy_' + i" [value]="'self'"
                                                        [formControlName]="'paidBy'"
                                                        (onClick)="updatePaidBy(i, 'self')">
                                                    </p-radioButton>
                                                    <label class="me-3">Self</label>

                                                    <p-radioButton [name]="'paidBy_' + i" [value]="'supplier'"
                                                        [formControlName]="'paidBy'"
                                                        (onClick)="updatePaidBy(i, 'supplier')">
                                                    </p-radioButton>
                                                    <label>Supplier</label>
                                                    <ng-container
                                                        *ngIf="expense.get('type')?.value === 'transportationCharge' && expense.get('paidBy')?.value === 'self'">
                                                        <p-checkbox inputId="rcm" (onChange)="updateTaxType(i, null, 'rcm')"
                                                            binary="true" formControlName="rcmApplicable"></p-checkbox>
                                                        <label for="rcm" class="ml-2">RCM Applicable</label>

                                                    </ng-container>
                                                    <ng-container
                                                        *ngIf="(expense.get('type')?.value === 'transportationCharge' && expense.get('paidBy')?.value === 'self' && expense.get('rcmApplicable')?.value) || (expense.get('type')?.value === 'otherCharges' || expense.get('type')?.value === 'royaltyCharges') && expense.get('paidBy')?.value === 'self'">
                                                        <p-radioButton *ngIf="expense.get('paidBy')?.value === 'self'"
                                                            formControlName="state_tax" value="intra_state_tax"
                                                            (onClick)="updateTaxType(i, 'intra_state_tax')">
                                                        </p-radioButton>
                                                        <label>Intra State Tax</label>

                                                        <p-radioButton *ngIf="expense.get('paidBy')?.value === 'self'"
                                                            formControlName="state_tax" value="inter_state_tax"
                                                            (onClick)="updateTaxType(i, 'inter_state_tax')">
                                                        </p-radioButton>
                                                        <label>Inter State Tax</label>
                                                    </ng-container>
                                                </div>

                                            </td>
                                            <td class="text-center">
                                                <button pButton type="button" icon="fa fa-trash"
                                                    class="p-button-text p-button-danger" (click)="removeExpense(i)">
                                                </button>
                                            </td>
                                        </tr>



                                        <tr
                                            *ngIf="(expense.get('type')?.value === 'transportationCharge' && expense.get('paidBy')?.value === 'self' && expense.get('rcmApplicable')?.value && expense.get('state_tax')?.value) || (expense.get('type')?.value === 'otherCharges' || expense.get('type')?.value === 'royaltyCharges') && expense.get('paidBy')?.value === 'self' && expense.get('state_tax')?.value">
                                            <td colspan="12">
                                                <div class="row">
                                                    <div class="{{expense.get('rcmApplicable')?.value ? 'col-md-3' : 'col-0'}}">

                                                        <div class="row" *ngIf="expense.get('rcmApplicable')?.value">
                                                            <div class="mt-2 col-12">
                                                                <div class="form-group local-forms">
                                                                    <p-dropdown [options]="serviceProviderList"
                                                                        optionLabel="name"
                                                                        optionValue="_id"
                                                                        placeholder="Service Provider"
                                                                        [style]="{ width: '100%' }" [filter]="true"
                                                                        filterBy="name" [showClear]="false" required
                                                                        formControlName="serviceProvider" name="serviceProvider"
                                                                        (onChange)="calculateTotalAmount()"></p-dropdown>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="{{expense.get('rcmApplicable')?.value ? 'col-md-9' : 'col-12'}}">
                                                        <div class="row">
                                                            <!-- Tax Dropdown -->
                                                            <div class="{{expense.get('state_tax')?.value === 'intra_state_tax' ? 'col-md-6' : 'col-md-4'}}"
                                                                class="mt-2">
                                                                <div class="form-group local-forms">
                                                                    <p-dropdown [options]="orderTaxList"
                                                                        optionLabel="orderTaxName"
                                                                        optionValue="orderNamevalue"
                                                                        placeholder="Select Tax"
                                                                        [style]="{ width: '100%' }" [filter]="true"
                                                                        filterBy="name" [showClear]="false" required
                                                                        formControlName="ItemTax" name="ItemTax"
                                                                        (onChange)="calculateTotalAmount()"></p-dropdown>
                                                                </div>
                                                            </div>

                                                            <!-- IGST -->
                                                            <div class="mt-2"
                                                                class="{{expense.get('state_tax')?.value === 'intra_state_tax' ? 'col-md-6 d-block' : 'd-none'}}">
                                                                <div class="form-group local-forms">
                                                                    <label>IGST <span
                                                                            class="login-danger">*</span></label>
                                                                    <div class="input-group">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text">₹</span>
                                                                        </div>
                                                                        <span class="form-control">{{
                                                                            expense.get('IGST').value
                                                                            }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- CGST -->
                                                            <div class="mt-2"
                                                                class="{{expense.get('state_tax')?.value === 'intra_state_tax' ? 'd-none' : 'col-md-4 d-block'}}">
                                                                <div class="form-group local-forms">
                                                                    <label>CGST <span
                                                                            class="login-danger">*</span></label>
                                                                    <div class="input-group">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text">₹</span>
                                                                        </div>
                                                                        <span class="form-control">{{
                                                                            expense.get('CGST').value
                                                                            }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- SGST -->
                                                            <div class="mt-2"
                                                                class="{{expense.get('state_tax')?.value === 'intra_state_tax' ? 'd-none' : 'col-md-4 d-block'}}">
                                                                <div class="form-group local-forms">
                                                                    <label>SGST <span
                                                                            class="login-danger">*</span></label>
                                                                    <div class="input-group">
                                                                        <div class="input-group-prepend">
                                                                            <span class="input-group-text">₹</span>
                                                                        </div>
                                                                        <span class="form-control">{{
                                                                            expense.get('SGST').value
                                                                            }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </td>
                                        </tr>

                                        <tr *ngIf="expense.get('paidBy')?.value === 'self'">
                                            <td colspan="12">
                                                <div class="row" style="display: flex; justify-content: end;">
                                                    <div class="col-md-4">
                                                        <div class="invoice-total-card">
                                                            <div class="invoice-total-box">
                                                                <div class="invoice-total-inner">
                                                                    <h3>
                                                                        <p class="mt-2 mb-0">
                                                                            {{getSelectedType(i)}} <span
                                                                                *ngIf="expense.get('taxAppliedExpense')?.value">
                                                                                ₹
                                                                                {{
                                                                                expense.get('taxAppliedExpense')?.value
                                                                                | number : "1.2-2"
                                                                                }}
                                                                            </span>
                                                                        </p>
                                                                    </h3>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </p-accordionTab>
            </p-accordion>
        </form>


        <p-accordion *ngIf="tab == 'purchase'" [activeIndex]="0">
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <span class="font-bold">Amount Details</span>
                    </div>
                </ng-template>

                <div class="row mt-3" *ngIf="slabDetails?.length > 0 && tab == 'purchase'">
                    <div class="mt-3 row">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-12 col-md-6 col-xl-6">
                                    <div class="form-group local-forms">
                                        <label for="taxableAmount">Taxable Amount</label>
                                        <input type="number" formControlName="taxableAmount" class="form-control"
                                            placeholder="Enter Taxable Amount" (change)="calculateTotalAmount()" />
                                        <div *ngIf="
                                                                    slabAddForm.hasError('taxRequired') && 
                                                                    slabAddForm.get('taxableAmount')?.touched
                                                                        ">
                                            <span class="login-danger">Please apply tax.</span>
                                        </div>
                                        <div *ngIf=" (slabAddForm.get('taxableAmount')?.hasError('min') &&
                                                                        slabAddForm.get('taxableAmount')?.touched) ||
                                                                        (slabAddForm.get('taxableAmount')?.hasError('max') &&
                                                                        slabAddForm.get('taxableAmount')?.touched)">
                                            <span class="login-danger">Taxable Amount cannot be greater than Paid To
                                                Supplier Amount
                                                ({{slabTotalCost}}).</span>
                                            <span *ngIf="
                                                slabAddForm.get('taxApplied').value > 0
                                                " style="color: #97704f; font-size: 12px">
                                                Applied Tax Amount:
                                                {{ slabAddForm.get('taxApplied').value | number : "1.2-2" }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 col-xl-6">
                                    <p-radioButton formControlName="state_tax" value="intra_state_tax" name="state_tax"
                                        (onClick)="getTaxType()">
                                    </p-radioButton>
                                    <label class="me-5 ms-3">Intra State Tax</label>

                                    <p-radioButton formControlName="state_tax" value="inter_state_tax" name="state_tax"
                                        (onClick)="getTaxType()">
                                    </p-radioButton>
                                    <label class="me-5 ms-3">Inter State Tax</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="{{slabAddForm.get('state_tax')?.value === 'intra_state_tax' ? 'col-md-6' : 'col-md-4'}}"
                                    *ngIf="slabAddForm.get('state_tax')?.value">
                                    <div class="form-group local-forms">
                                        <p-dropdown [options]="orderTaxList" styleClass="" appendTo="body"
                                            optionLabel="orderTaxName" optionValue="orderNamevalue"
                                            placeholder="Select Tax" [style]="{ width: '100%' }" [filter]="true"
                                            filterBy="name" [showClear]="false" required formControlName="ItemTax"
                                            name="ItemTax" (onChange)="calculateTotalAmount()"></p-dropdown>
                                    </div>
                                </div>
                                <div class="{{slabAddForm.get('state_tax')?.value === 'intra_state_tax' ? 'col-md-6 d-block' : 'd-none'}}"
                                    *ngIf="slabAddForm.get('state_tax')?.value">
                                    <div class="form-group local-forms">
                                        <label for="igst">IGST
                                            <span class="login-danger">*</span></label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">₹</span>
                                            </div>
                                            <span class="form-control">{{
                                                slabAddForm.get("IGST").value
                                                }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="{{slabAddForm.get('state_tax')?.value === 'intra_state_tax' ? 'd-none' : 'col-md-4 d-block'}}"
                                    *ngIf="slabAddForm.get('state_tax')?.value">
                                    <div class="form-group local-forms">
                                        <label for="cgst">CGST
                                            <span class="login-danger">*</span></label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">₹</span>
                                            </div>
                                            <span class="form-control">{{
                                                slabAddForm.get("CGST").value
                                                }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="{{slabAddForm.get('state_tax')?.value === 'intra_state_tax' ? 'd-none' : 'col-md-4 d-block'}}"
                                    *ngIf="slabAddForm.get('state_tax')?.value">
                                    <div class="form-group local-forms">
                                        <label for="sgst">SGST
                                            <span class="login-danger">*</span></label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">₹</span>
                                            </div>
                                            <span class="form-control">{{
                                                slabAddForm.get("SGST").value
                                                }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="finishes">Non-Taxable Amount</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₹</span>
                                    </div>
                                    <span class="form-control">{{
                                        slabAddForm.get("nonTaxableAmount").value
                                        }}</span>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="paidToSupplierPurchaseCost">Payable to Supplier
                                    <span class="login-danger">*</span></label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₹</span>
                                    </div>
                                    <span class="form-control">{{
                                        slabAddForm.get("paidToSupplierSlabCost").value
                                        }}</span>
                                </div>
                                <span *ngIf="
                                    slabAddForm.get('taxable').value  > slabAddForm.get('taxableAmount').value &&
                                    slabAddForm.get('taxable').value  != 0
                                    " style="color: #97704f; font-size: 12px">
                                    Tax Applied Amount:
                                    {{ slabAddForm.get('taxable')?.value | number : "1.2-2" }}
                                    + Non Taxable Amount :
                                    {{
                                    slabAddForm.get("nonTaxableAmount")?.value | number : "1.2-2"
                                    }}
                                    <span *ngIf="slabAddForm.get('purchaseDiscount')?.value > 0">
                                        - Discount :
                                        {{
                                        slabAddForm.get("purchaseDiscount")?.value | number : "1.2-2"
                                        }}
                                    </span>
                                </span>
                            </div>
                        </div> -->
                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="purchaseDiscount">Discount </label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₹</span>
                                    </div>
                                    <input class="form-control" type="number" placeholder="Enter Discount"
                                        (change)="calculateTotalAmount()" formControlName="purchaseDiscount" />
                                </div>
                                <div *ngIf="setValidations('purchaseDiscount')">
                                    <span class="login-danger">Input Must be between 1 to {{maxPurchaseAmount}}.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="purchaseTDS">TDS </label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₹</span>
                                    </div>
                                    <input class="form-control" type="number" placeholder="Enter TDS"
                                        (change)="calculateTotalAmount()" formControlName="purchaseTDS" />
                                </div>
                                <div *ngIf="setValidations('purchaseTDS')">
                                    <span class="login-danger">Input Must be between 1 to {{maxPurchaseAmount}}.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="display: flex; justify-content: end;">
                            <div class="col-md-4">
                                <div class="invoice-total-card">
                                    <div class="invoice-total-box">
                                        <div class="invoice-total-inner">
                                            <h3>
                                                <p class="mt-2 mb-0">
                                                    Payable to Supplier
                                                    <span *ngIf="slabAddForm.get('paidToSupplierSlabCost')?.value">
                                                        ₹
                                                        {{
                                                        slabAddForm.get('paidToSupplierSlabCost')?.value
                                                        | number : "1.2-2"
                                                        }}
                                                    </span>
                                                </p>
                                            </h3>
                                            <span *ngIf=" slabAddForm.get('paidToSupplierSlabCost')?.value && 
                                                slabAddForm.get('taxable').value  > slabAddForm.get('taxableAmount').value &&
                                                slabAddForm.get('taxable').value  != 0
                                                " style="color: #97704f; font-size: 12px">
                                                Tax Applied Amount:
                                                {{ slabAddForm.get('taxable')?.value | number : "1.2-2" }}
                                                + Non Taxable Amount :
                                                {{
                                                slabAddForm.get("nonTaxableAmount")?.value | number : "1.2-2"
                                                }}
                                                <span *ngIf="slabAddForm.get('purchaseDiscount')?.value > 0">
                                                    - Discount :
                                                    {{
                                                    slabAddForm.get("purchaseDiscount")?.value | number : "1.2-2"
                                                    }}
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </p-accordionTab>
        </p-accordion>



        <div class="row" *ngIf="slabDetails?.length > 0">
            <div class="col-sm-12">
                <div class="card card-table">
                    <div class="card-body">
                        <div class="page-table-header mb-2">
                            <div class="d-flex m-b-10" style="justify-content: space-between">
                                <h3>Slab List</h3>
                            </div>
                        </div>

                        <div class="row p-2">
                            <p-accordion [activeIndex]="[0]" [multiple]="true">
                                <p-accordionTab *ngFor="let data of slabDetails; let i = index; trackBy: trackByFn">
                                    <ng-template pTemplate="header">
                                        <span class="d-flex justify-content-between w-full">
                                            <span class="font-bold white-space-nowrap">
                                                Slab Number: {{ data?.slabNo }}
                                            </span>
                                            <p-button *ngIf="tab == 'product'" [text]="true"
                                                styleClass="w-2rem h-2rem p-0" icon="fa fa-trash"
                                                (click)="deleteAccordian(i)"></p-button>
                                        </span>
                                    </ng-template>

                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="card card-table show-entire">
                                                <div class="page-table-header mb-2 m-3">
                                                    <div class="row practice-card">
                                                        <div class="col-xl-6 col-lg-6 col-sm-12">
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Slab Name
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.slabName ?? ' -- '?? '--' }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Length ({{unitsType == 'square_feet' ? 'Inch' :
                                                                    'Meter'}})
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.length ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Width ({{unitsType == 'square_feet' ? 'Inch' :
                                                                    'Meter'}})
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">{{ data?.width ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Thickness
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.thickness ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Number of Pieces
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.noOfPieces ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Finishes
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.finishes.name ?? ' -- ' }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Total Amount
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data?.totalCosting ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-6 col-lg-6 col-sm-12">
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Quantity / Sq. Feet
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.totalSQFT ? (data.totalSQFT |
                                                                        number:'1.2-2') : '--' }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Quantity / Sq. Meter
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        {{ data?.totalSQMT ? (data.totalSQMT |
                                                                        number:'1.2-2') : '--' }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Rate / Sq. Feet
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data?.ratePerSqFeet ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Rate / Sq. Meter
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data?.ratePerSqMeter ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Cost Per SQFT
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data?.costPerSQFT ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-4 col-md-4 col-xl-4 col-form-label">
                                                                    Cost Per SQMT
                                                                </h5>
                                                                <div class="col-lg-8 col-md-8 col-xl-8">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data?.costPerSQMT ?? ' -- '}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p-accordionTab>
                            </p-accordion>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </form>
    <div class="row" style="display: flex; justify-content: end;" *ngIf="slabAddForm.get('totalCost')?.value">
        <div class="col-md-4">
            <div class="invoice-total-card">
                <h4 class="invoice-total-title">Summary</h4>
                <div class="invoice-total-box">
                    <div class="invoice-total-inner">
                        <p *ngIf="slabAddForm.get('totalSQFT')?.value">
                            Total Quantity (Sq. Feet)<span>
                                {{ slabAddForm.get('totalSQFT').value | number:'1.2-2' }}

                            </span>
                        </p>
                        <div class="invoice-total-inner">
                            <p *ngIf="slabAddForm.get('ratePerSqFeet')?.value">
                                Rate / Sq. Feet<span>
                                    ₹ {{ slabAddForm.get('ratePerSqFeet').value }}

                                </span>
                            </p>
                        </div>
                        <!-- <p *ngIf="slabAddForm.get('transportationCharge')?.value" class="mt-2">
                            Transportation Charges
                            <span>
                                ₹
                                {{
                                slabAddForm.get('transportationCharge')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p>
                        <p *ngIf="slabAddForm.get('royaltyCharge')?.value" class="mt-2">
                            Other Charges
                            <span>
                                ₹
                                {{
                                slabAddForm.get('royaltyCharge')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p>
                        <p *ngIf="slabAddForm.get('purchaseDiscount')?.value" class="mt-2">
                            Discount
                            <span>
                                ₹
                                {{
                                slabAddForm.get('purchaseDiscount')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p> -->
                        <!-- <p class="mt-2">
                            Cost / Square Feet
                            <span *ngIf="slabAddForm.get('costPerSQFT')?.value">
                                ₹
                                {{
                                slabAddForm.get('costPerSQFT')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p> -->
                        <h3>
                            <p class="mt-2">
                                Total Purchase Cost
                                <span *ngIf="slabAddForm.get('totalCost')?.value">
                                    ₹
                                    {{
                                    slabAddForm.get('totalCost')?.value
                                    | number : "1.2-2"
                                    }}
                                </span>
                            </p>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<p-dialog header="Add Slab" [(visible)]="addvisible" [modal]="true" [style]="{ width: '60%'}"
    (onHide)="closeSlabForm(myForm)">
    <div class="modal-content mt-2" style="position: relative;">
        <div class="modal-body">
            <form #myForm="ngForm">
                <div>
                    <div class="row">
                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="category">Category <span class="login-danger">*</span></label>
                                <p-dropdown [options]="CategoryListsEditArray" styleClass="" appendTo="body"
                                    optionLabel="name" optionValue="_id" placeholder="Select Category"
                                    [style]="{ width: '100%' }" [filter]="true" filterBy="name" [showClear]="false"
                                    required [(ngModel)]="category" #CATEGORY="ngModel" name="category" required
                                    (onChange)="findSubCategory($event.value)"></p-dropdown>
                                <!-- <div *ngIf="CATEGORY.invalid && (CATEGORY.dirty || CATEGORY.touched)">
                                        <div *ngIf="CATEGORY.errors?.['required']">
                                            <span class="login-danger">Category is required.</span>
                                        </div>
                                    </div> -->
                                <div *ngIf="CATEGORY.touched">
                                    <span class="login-danger" *ngIf="!category?.name">Category is required.</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="subCategory">Sub Category<span class="login-danger">*</span></label>
                                <p-dropdown [options]="subCategorListByCategory" styleClass="" appendTo="body"
                                    placeholder="Select Sub Category" optionLabel="name" optionValue="_id"
                                    (onChange)="getHsnCode($event.value)" [style]="{ width: '100%' }" [filter]="true"
                                    filterBy="name" [showClear]="false" required [(ngModel)]="subCategory"
                                    name="subCategory" #SUBCATEGORY="ngModel">
                                </p-dropdown>

                                <!-- <div *ngIf="SUBCATEGORY.invalid && (SUBCATEGORY.dirty || SUBCATEGORY.touched)">
                                        <div *ngIf="SUBCATEGORY.errors?.['required']">
                                            <span class="login-danger">Sub Category is required.</span>
                                        </div>
                                    </div> -->
                                <div *ngIf="SUBCATEGORY.touched">
                                    <span class="login-danger" *ngIf="!subCategory?.name">Sub Category is
                                        required.</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="slabName">Stone Name</label>
                                <input class="form-control" type="text" placeholder="Enter Marble / Stone Name"
                                    pattern="^.{1,50}$" name="marbleName" [(ngModel)]="marbleName"
                                    (change)="getSlabDetails(true)" #MARBLENAME="ngModel" />
                            </div>
                        </div>


                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms position-relative">
                                <label for="slabNumber">Slab Number <span class="login-danger">*</span></label>

                                <div class="input-with-barcode">
                                    <input class="form-control pr-5" type="text" pattern="^.{1,50}$" [disabled]="true"
                                        name="slabNumber" [(ngModel)]="slabNumber" (change)="getSlabDetails(true)"
                                        #SLABNUMBER="ngModel" />

                                    <img *ngIf="slabNumber" (click)="openBarCodePopup()" src="assets/img/barcode.png"
                                        alt="barcode" class="barcode-icon" />
                                </div>
                            </div>
                        </div>



                        <!-- <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="finishes">Finishes</label>
                                <p-dropdown [options]="finisheshList" styleClass="" appendTo="body" name="finishes"
                                    placeholder="Select finishes" optionLabel="name" [style]="{ width: '100%' }"
                                    [filter]="true" filterBy="name" [showClear]="true" [(ngModel)]="finishes"
                                    #FINISHESH="ngModel">
                                </p-dropdown>
                            </div>
                        </div> -->


                        <h3 class="slab-specification">Slab Specification :</h3>

                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="noOfPieces">Select Unit<span class="login-danger">*</span> </label>
                                <p-dropdown [options]="unitsList" appendTo="body" optionLabel="name" optionValue="value"
                                    placeholder="Select Unit" name="unitsType" [(ngModel)]="unitsType"
                                    [style]="{ width: '100%' }" #UNITSTYPE="ngModel" [filter]="true" filterBy="name"
                                    (onChange)="getNewUnit($event.value)">
                                </p-dropdown>
                                <div *ngIf="UNITSTYPE.invalid && (UNITSTYPE.dirty || UNITSTYPE.touched)">
                                    <div *ngIf="UNITSTYPE.errors?.['required']">
                                        <span class="login-danger">Field is required.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="noOfPieces">Number of Pieces <span class="login-danger">*</span> </label>
                                <input class="form-control" type="number" placeholder="Enter Number of Pieces"
                                    name="noOfPieces" (change)="getSlabDetails(true)" min="1" max="10000" required
                                    [(ngModel)]="noOfPieces" #NOOFPIECES="ngModel" />
                                <div *ngIf="NOOFPIECES.invalid && (NOOFPIECES.dirty || NOOFPIECES.touched)">
                                    <div *ngIf="NOOFPIECES.errors?.['required']">
                                        <span class="login-danger">Field is required.</span>
                                    </div>
                                    <div *ngIf="NOOFPIECES.errors?.['min'] || NOOFPIECES.errors?.['max']">
                                        <span class="login-danger">Number Of Pieces must be between 1 and 10000.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <!-- Length Field -->
                            <div class="col-12 col-md-4 col-xl-4">
                                <div class="form-group local-forms">
                                    <label for="length">Length </label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">{{unitsType == 'square_feet' ? 'Inch' :
                                                'Meter'}}</span>
                                        </div>
                                        <input class="form-control" type="number" id="length" name="length"
                                            (change)="getSlabDetails(true)" min="1" max="500" placeholder="Enter Length"
                                            [(ngModel)]="length" #LENGTH="ngModel" />
                                    </div>
                                    <div *ngIf="LENGTH.invalid && (LENGTH.dirty || LENGTH.touched)">
                                        <!-- <div *ngIf="LENGTH.errors?.['required']">
                          <span class="login-danger">Field is required.</span>
                        </div> -->
                                        <div *ngIf="LENGTH.errors?.['min'] || LENGTH.errors?.['max']">
                                            <span class="login-danger">Length must be between 1 and 500.</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Width Field -->
                            <div class="col-12 col-md-4 col-xl-4">
                                <div class="form-group local-forms">
                                    <label for="width">Width </label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">{{unitsType == 'square_feet' ? 'Inch' :
                                                'Meter'}}</span>
                                        </div>
                                        <input class="form-control" type="number" id="width" name="width"
                                            (change)="getSlabDetails(true)" min="1" max="500" placeholder="Enter Width"
                                            [(ngModel)]="width" #WIDTH="ngModel" />
                                    </div>
                                    <div *ngIf="WIDTH.invalid && (WIDTH.dirty || WIDTH.touched)">
                                        <!-- <div *ngIf="WIDTH.errors?.['required']">
                          <span class="login-danger">Field is required.</span>
                        </div> -->
                                        <div *ngIf="WIDTH.errors?.['min'] || WIDTH.errors?.['max']">
                                            <span class="login-danger">Width must be between 1 and 500.</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Height Field -->
                            <div class="col-12 col-md-4 col-xl-4">
                                <div class="form-group local-forms">
                                    <label for="thickness">Thickness </label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">MM</span>
                                        </div>
                                        <input class="form-control" type="number" id="thickness" name="thickness"
                                            min="1" max="500" placeholder="Enter Thickness" [(ngModel)]="thickness"
                                            #THISCKNESS="ngModel" />
                                    </div>
                                    <div *ngIf="THISCKNESS.invalid && (THISCKNESS.dirty || THISCKNESS.touched)">
                                        <!-- <div *ngIf="THISCKNESS.errors?.['required']">
                                                <span class="login-danger">Field is required.</span>
                                            </div> -->
                                        <div *ngIf="THISCKNESS.errors?.['min'] || THISCKNESS.errors?.['max']">
                                            <span class="login-danger">Thickness must be between 1 and 500.</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <p-accordion [activeIndex]="rows.length > 0 ? 0 : null">
                            <p-accordionTab>
                                <ng-template pTemplate="header">
                                    <div class="header-flex">
                                        <span>Slab Details</span>
                                        <p-button [text]="true" styleClass="p-button-text add-btn" icon="fa fa-plus"
                                            (click)="addRow();$event.stopPropagation()"></p-button>
                                    </div>
                                </ng-template>
                                <div style="max-height: 250px;overflow-x: auto;overflow-y: hidden;">
                                    <p-table [value]="rows" editable="true" scrollHeight="250px">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Piece Number</th>
                                                <th>Length ({{unitsType == 'square_feet' ? 'Inch' : 'Meter'}})</th>
                                                <th>Width ({{unitsType == 'square_feet' ? 'Inch' : 'Meter'}})</th>
                                                <th>Quantity (Sq. Feet)</th>
                                                <th>Quantity (Sq. Meter)</th>
                                                <th style="width: 20%;">Finishes</th>
                                                <th>Actions</th>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="body" let-rowData let-ri="rowIndex">
                                            <tr>
                                                <td>
                                                    <input class="form-control" type="number" [disabled]="true"
                                                        [(ngModel)]="rowData.pieceNumber" name="pieceNumber{{ri}}" />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="number"
                                                        [disabled]="!rowData.isEditing" [(ngModel)]="rowData.length"
                                                        name="length{{ri}}"
                                                        (input)="updateQuantity(rowData); calculateTotalQuantity()" />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="number"
                                                        [disabled]="!rowData.isEditing" [(ngModel)]="rowData.width"
                                                        name="width{{ri}}" (input)="updateQuantity(rowData);
                                                                                        calculateTotalQuantity()" />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="number" [disabled]="true"
                                                        [(ngModel)]="rowData.quantity" name="quantity{{ri}}"
                                                        (input)="calculateTotalQuantity()" />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="number" [disabled]="true"
                                                        [(ngModel)]="rowData.totalQuantityMeter"
                                                        (input)="calculateTotalQuantity()"
                                                        name="totalQuantityMeter{{ri}}" />
                                                </td>
                                                <td>
                                                    <p-dropdown [options]="finisheshList" optionLabel="name"
                                                        [disabled]="!rowData.isEditing" [(ngModel)]="rowData.finish"
                                                        name="finish{{ri}}" placeholder="Select Finish" appendTo="body">
                                                    </p-dropdown>

                                                </td>
                                                <td>
                                                    <ng-container *ngIf="!rowData.isEditing">
                                                        <p-button icon="fa fa-pencil" styleClass="p-button-text"
                                                            (click)="enableEdit(rowData)"></p-button>
                                                        <p-button icon="fa fa-trash" styleClass="p-button-text"
                                                            (click)="deleteRow(ri)"></p-button>
                                                    </ng-container>
                                                    <ng-container *ngIf="rowData.isEditing">
                                                        <p-button icon="fa fa-save" styleClass="p-button-text"
                                                            (click)="saveRow(rowData)"></p-button>
                                                        <p-button icon="fa fa-times" styleClass="p-button-text"
                                                            (click)="cancelEdit(rowData)"></p-button>
                                                    </ng-container>
                                                </td>

                                                <!-- <td>
                                                                                    <p-button [text]="true" styleClass="p-button-text" icon="fa fa-pencil"
                                                                                        (click)="addRow()"></p-button>
                                                                                    <p-button [text]="true" styleClass="p-button-text  p-button-danger"
                                                                                        icon="fa fa-trash" (click)="deleteRow(ri)"></p-button>
                                                                                </td> -->
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                </div>
                            </p-accordionTab>
                        </p-accordion>





                        <h3 class="slab-specification">Price :</h3>


                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="quantity">Total Quantity (Sq. Feet) <span class="login-danger">*</span>
                                </label>
                                <input class="form-control" type="number" name="quantity"
                                    [disabled]="unitsType == 'square_meter'"
                                    (change)="getSlabDetails(false, true); updateTotalQuantity('feet')" min="1"
                                    max="1000000" placeholder="Enter Quantity" [(ngModel)]="totalQuantity" required
                                    #QUANTITY="ngModel" />

                                <!-- <div *ngIf="QUANTITY.invalid && (QUANTITY.dirty || QUANTITY.touched)">
                                    <div *ngIf="QUANTITY.errors?.['required']">
                                        <span class="login-danger">Quantity is required.</span>
                                    </div>
                                    <div *ngIf="QUANTITY.errors?.['min'] || QUANTITY.errors?.['max']">
                                        <span class="login-danger">Quantity must be between 1 and 1000000.</span>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="quantityMeter">Total Quantity (Sq. Meter) <span
                                        class="login-danger">*</span>
                                </label>
                                <input class="form-control" type="number" name="quantityMeter"
                                    [disabled]="unitsType == 'square_feet'"
                                    (change)="getSlabDetails(false, true); updateTotalQuantity('meter')" min="1"
                                    max="1000000" placeholder="Enter quantity in Meter" [(ngModel)]="totalQuantityMeter"
                                    required #QUANTITYMETER="ngModel" />

                                <!-- <div *ngIf="QUANTITY.invalid && (QUANTITY.dirty || QUANTITY.touched)">
                                    <div *ngIf="QUANTITY.errors?.['required']">
                                        <span class="login-danger">Quantity is required.</span>
                                    </div>
                                    <div *ngIf="QUANTITY.errors?.['min'] || QUANTITY.errors?.['max']">
                                        <span class="login-danger">Quantity must be between 1 and 1000000.</span>
                                    </div>
                                </div> -->
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="ratePerSqFeet">Rate / Sq. Feet <span class="login-danger">*</span> </label>
                                <input class="form-control" type="number" placeholder="Enter Rate / Sq. Feet"
                                    name="ratePerSqFeet" (change)="getSlabDetails(true);getRate('feet')" min="1"
                                    max="1000000" [(ngModel)]="ratePerSqFeet" #RATEPERSQFT="ngModel" required
                                    [disabled]="unitsType == 'square_meter'" />
                                <div *ngIf="RATEPERSQFT.invalid && (RATEPERSQFT.dirty || RATEPERSQFT.touched)">
                                    <div *ngIf="RATEPERSQFT.errors?.['required']">
                                        <span class="login-danger">Ṛate / Sq. Feet is required.</span>
                                    </div>
                                    <div *ngIf="RATEPERSQFT.errors?.['min'] || RATEPERSQFT.errors?.['max']">
                                        <span class="login-danger">Rate / Sq. Feet must be between 1 and 1000000.</span>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="ratePerSqMeter">Rate / Sq. Meter <span class="login-danger">*</span>
                                </label>
                                <input class="form-control" type="number" placeholder="Enter Rate / Sq. Meter"
                                    name="ratePerSqMeter" (change)="getSlabDetails(true);getRate('meter')" min="1"
                                    max="1000000" [(ngModel)]="ratePerSqMeter" #RATEPERSQMT="ngModel" required
                                    [disabled]="unitsType == 'square_feet'" />
                                <div *ngIf="RATEPERSQMT.invalid && (RATEPERSQMT.dirty || RATEPERSQMT.touched)">
                                    <div *ngIf="RATEPERSQMT.errors?.['required']">
                                        <span class="login-danger">Ṛate / Sq. Meter is required.</span>
                                    </div>
                                    <div *ngIf="RATEPERSQMT.errors?.['min'] || RATEPERSQMT.errors?.['max']">
                                        <span class="login-danger">Rate / Sq. Meter must be between 1 and
                                            1000000.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-xl-6">
                            <div class="form-group local-forms">
                                <label for="totalAmount">Total Amount <span class="login-danger">*</span> </label>
                                <input class="form-control" type="number" name="totalAmount" placeholder="Total Amount"
                                    [disabled]="true" [(ngModel)]="totalAmount" #TOTALAMOUNT="ngModel" />
                            </div>
                        </div>

                        <!-- check required for catgory and sub category -->
                        <div class="col-12">
                            <div class="settings-btns text-end m-b-10">
                                <button type="button" class="border-0 btn btn-primary btn-gradient-primary m-r-10"
                                    (click)="logSlabDetails(myForm);"
                                    [disabled]="myForm.invalid || !subCategory?.name || !category?.name">
                                    Save
                                </button>
                                <button type="button" class="btn btn-secondary" (click)="closeSlabForm(myForm)">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</p-dialog>

<p-dialog header="Barcode" [(visible)]="addbarcodevisible" [modal]="true" [style]="{ width: '30%'}"
    (onHide)="closeBarCodeForm()">
    <div class="modal-content mt-2">

        <!-- Show the barcode image -->
        <div class="text-center mb-3">
            <img [src]="barcodeImage" alt="Barcode" style="max-width: 100%; height: auto;" />
        </div>

        <!-- Centered print button -->
        <div class="col-12">
            <div class="settings-btns text-center m-b-10">
                <button type="button" class="border-0 btn btn-primary btn-gradient-primary m-r-10">
                    Print Barcode
                </button>
            </div>
        </div>

    </div>
</p-dialog>